#include <emu/pci/agp.h>

AGP::AGP(PCIBus* bus)
: 
PCIDevice(0x10de, 0x01b7, 0x06, 0x04)
{
	bus->RegisterPCIDevice(0, 0x1e, 0, this);

	write_config_word(0x24, 0x00);
	write_config_word(0x26, 0x00);

	write_config_word(0x06, 0x20 | 0x200);
	write_config_word(0x1e, 0x20 | 0x200 | 0x80);
	write_config_byte(0x3e, 0x80);
	write_config_byte(0x3f, 0x00);
	write_config_byte(0x1c, 0xf0);
	write_config_byte(0x1d, 0x00);
	write_config_word(0x20, 0xfd00);
	write_config_word(0x22, 0xfe70);
	write_config_dword(0x28, 0xff3fbfff);
	write_config_dword(0x2C, 0xafff7fff);
}